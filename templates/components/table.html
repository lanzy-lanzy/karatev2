{% comment %}
Table Component
Usage:
{% include "components/table.html" with headers=headers rows=rows %}

For mobile, tables transform into card-based layout.
{% endcomment %}

<!-- Desktop Table View -->
<div class="hidden md:block overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                {% for header in headers %}
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider {% if header.sortable %}cursor-pointer hover:bg-gray-100{% endif %}"
                    {% if header.sortable %}
                    hx-get="{{ sort_url }}?sort={{ header.field }}&order={% if current_sort == header.field and current_order == 'asc' %}desc{% else %}asc{% endif %}"
                    hx-target="#table-body"
                    hx-swap="innerHTML"
                    {% endif %}>
                    <div class="flex items-center space-x-1">
                        <span>{{ header.label }}</span>
                        {% if header.sortable %}
                        <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"></path>
                        </svg>
                        {% endif %}
                    </div>
                </th>
                {% endfor %}
                {% if show_actions %}
                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions
                </th>
                {% endif %}
            </tr>
        </thead>
        <tbody id="table-body" class="bg-white divide-y divide-gray-200">
            {% block table_body %}
            {% for row in rows %}
            <tr class="hover:bg-gray-50 transition-colors">
                {% for cell in row.cells %}
                <td class="px-6 py-4 whitespace-nowrap text-sm {% if cell.bold %}font-medium text-gray-900{% else %}text-gray-500{% endif %}">
                    {{ cell.value|safe }}
                </td>
                {% endfor %}
                {% if show_actions %}
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    {{ row.actions|safe }}
                </td>
                {% endif %}
            </tr>
            {% empty %}
            <tr>
                <td colspan="{{ headers|length|add:1 }}" class="px-6 py-12 text-center text-gray-500">
                    {{ empty_message|default:"No data available" }}
                </td>
            </tr>
            {% endfor %}
            {% endblock %}
        </tbody>
    </table>
</div>

<!-- Mobile Card View -->
<div class="md:hidden space-y-4">
    {% block mobile_cards %}
    {% for row in rows %}
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
        {% for header, cell in row.items %}
        <div class="flex justify-between py-2 {% if not forloop.last %}border-b border-gray-100{% endif %}">
            <span class="text-sm font-medium text-gray-500">{{ header }}</span>
            <span class="text-sm {% if cell.bold %}font-medium text-gray-900{% else %}text-gray-700{% endif %}">
                {{ cell.value|safe }}
            </span>
        </div>
        {% endfor %}
        {% if row.actions %}
        <div class="mt-4 flex justify-end space-x-2">
            {{ row.actions|safe }}
        </div>
        {% endif %}
    </div>
    {% empty %}
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center text-gray-500">
        {{ empty_message|default:"No data available" }}
    </div>
    {% endfor %}
    {% endblock %}
</div>
