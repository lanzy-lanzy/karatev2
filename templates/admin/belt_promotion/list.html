{% extends "base.html" %}
{% load static %}

{% block title %}Belt Rank Promotion - BlackCobra Karate Club{% endblock %}
{% block page_title %}Belt Rank Promotion{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-700">
        <div class="flex flex-col lg:flex-row items-center justify-between">
            <div>
                <h2 class="text-2xl font-bold text-white mb-2">Belt Rank Promotion Management</h2>
                <p class="text-gray-400">Manage and override trainee belt ranks</p>
            </div>
            <a href="{% url 'admin_belt_promotion_history' %}" class="mt-4 lg:mt-0 inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                Promotion History
            </a>
        </div>
    </div>
    
    <!-- Filters -->
    <div class="bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-700" id="filter-form">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <!-- Search -->
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Search Trainee</label>
                <input 
                    type="text" 
                    name="search" 
                    value="{{ search_query }}"
                    placeholder="Name or username..."
                    hx-get="{% url 'admin_belt_promotion_list_partial' %}"
                    hx-trigger="keyup changed delay:300ms"
                    hx-target="#trainees-list"
                    hx-include="#filter-form"
                    class="w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-blue-500 transition-colors"
                />
            </div>
            
            <!-- Belt Filter -->
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Filter by Belt</label>
                <select 
                    name="belt_filter"
                    hx-get="{% url 'admin_belt_promotion_list_partial' %}"
                    hx-trigger="change"
                    hx-target="#trainees-list"
                    hx-include="#filter-form"
                    class="w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-blue-500 transition-colors"
                >
                    <option value="">All Belts</option>
                    {% for value, label in belt_choices %}
                    <option value="{{ value }}" {% if belt_filter == value %}selected{% endif %}>{{ label }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <!-- Status Filter -->
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Filter by Status</label>
                <select 
                    name="status_filter"
                    hx-get="{% url 'admin_belt_promotion_list_partial' %}"
                    hx-trigger="change"
                    hx-target="#trainees-list"
                    hx-include="#filter-form"
                    class="w-full px-3 py-2 bg-gray-700 border border-gray-600 text-white rounded-lg focus:outline-none focus:border-blue-500 transition-colors"
                >
                    <option value="">All Status</option>
                    <option value="active" {% if status_filter == 'active' %}selected{% endif %}>Active</option>
                    <option value="inactive" {% if status_filter == 'inactive' %}selected{% endif %}>Inactive</option>
                    <option value="suspended" {% if status_filter == 'suspended' %}selected{% endif %}>Suspended</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- Trainees List -->
    <div id="trainees-list">
        {% include "admin/belt_promotion/list_partial.html" %}
    </div>
</div>
{% endblock %}
